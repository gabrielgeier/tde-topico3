<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
<ui:composition template="template.xhtml">
    <ui:define name="title">Livros</ui:define>
    <ui:define name="content">
        <h1>Livros</h1>
        <h:form>
            <p:dataTable value="#{bibliotecaBean.livros}" var="l" paginator="true" rows="10"
                rowsPerPageTemplate="5,10,20" responsiveLayout="scroll" sortMode="single" filterDelay="400">
                <p:column headerText="Título" sortBy="#{l.titulo}" filterBy="#{l.titulo}" filterMatchMode="contains">
                    <h:outputText value="#{l.titulo}" />
                </p:column>
                <p:column headerText="Autor" sortBy="#{l.autor.nome}" filterBy="#{l.autor.nome}"
                    filterMatchMode="contains">
                    <h:outputText value="#{l.autor.nome}" />
                </p:column>
                <p:column headerText="ISBN" sortBy="#{l.isbn}" filterBy="#{l.isbn}" filterMatchMode="contains"
                    style="width:160px">
                    <h:outputText value="#{l.isbn}" />
                </p:column>
                <p:column headerText="Status" sortBy="#{l.disponivel}">
                    <h:outputText value="Disponível" rendered="#{l.disponivel}" styleClass="ok" />
                    <h:outputText value="Emprestado" rendered="#{!l.disponivel}" styleClass="bad" />
                </p:column>
                <p:column headerText="Ações" exportable="false" style="width:160px; text-align:center">
                    <h:commandButton value="Emprestar" action="#{bibliotecaBean.emprestarLivro(l.id)}"
                        rendered="#{l.disponivel and facesContext.externalContext.isUserInRole('USER')}"
                        styleClass="btn" />
                </p:column>
            </p:dataTable>
        </h:form>
    </ui:define>
</ui:composition>

</html>